<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS2 Server Info</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #1a1a1a;
      color: #e0e0e0;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
      max-width: 1200px;
      margin: auto;
    }
    h1, h2, h3 {
      color: #ffa500;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .container {
      width: 100%;
      background-color: #2c2c2c;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #444;
      padding: 12px;
      text-align: center;
    }
    th {
      background-color: #ffa500;
      color: #1a1a1a;
      text-transform: uppercase;
    }
    tr:nth-child(even) {
      background-color: #333;
    }
    button {
      background-color: #ffa500;
      color: #1a1a1a;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      text-transform: uppercase;
      transition: background-color 0.3s, transform 0.2s;
      margin-right: 10px;
    }
    button:hover {
      background-color: #ff7f00;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>CS2 Server Info</h1>
    <div id="info">ƒêang t·∫£i th√¥ng tin...</div>
    <button id="connectButton" style="display: none;">üîó K·∫øt n·ªëi t·ªõi Server</button>
    <button id="copyIpButton">üìã Sao ch√©p IP</button>
    <script>
      document.getElementById("copyIpButton").onclick = () => {
        const ip = "171.227.65.1:27015";
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(ip)
            .then(() => {
              console.log("ƒê√£ sao ch√©p IP th√†nh c√¥ng!");
            })
            .catch(err => {
              console.error("L·ªói sao ch√©p:", err);
              alert("Kh√¥ng th·ªÉ sao ch√©p t·ª± ƒë·ªông. Vui l√≤ng sao ch√©p th·ªß c√¥ng: " + ip);
            });
        } else {
          alert("Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ sao ch√©p t·ª± ƒë·ªông. H√£y sao ch√©p th·ªß c√¥ng: " + ip);
        }
      };
    </script>
    
  </div>

  <div class="container">
    <h2>H∆∞·ªõng D·∫´n D√πng L·ªánh trong Server</h2>
    <table>
      <tr>
        <th>L·ªánh</th>
        <th>Ch·ª©c nƒÉng</th>
        <th>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</th>
      </tr>
      <tr>
        <td>M·ªü chat</td>
        <td>ƒê·ªÉ nh·∫≠p l·ªánh</td>
        <td>Nh·∫•n "Y" ho·∫∑c "U"</td>
      </tr>
      <tr>
        <td>!gun</td>
        <td>Ch·ªçn s√∫ng</td>
        <td>D√πng W, A, S, D ƒë·ªÉ di chuy·ªÉn. Nh·∫•n Space ƒë·ªÉ ch·ªçn. Nh·∫•n Tab ƒë·ªÉ t·∫Øt b·∫£ng.</td>
      </tr>
      <tr>
        <td>!mode</td>
        <td>Ch·ªçn ch·∫ø ƒë·ªô ch∆°i</td>
        <td>Ch·ªçn Solo s√∫ng tr∆∞·ªùng ho·∫∑c Solo AWP. Khi ch·ªçn AWP, t·∫Øt s√∫ng tr∆∞·ªùng ƒë·ªÉ tr√°nh nh·∫£y ng·∫´u nhi√™n.(ch·ªçn solo s√∫ng tr∆∞·ªùng c≈©ng v·∫≠y)</td>
      </tr>
      <tr>
        <td>!solo &lt;t√™n ng∆∞·ªùi ch∆°i&gt;</td>
        <td>M·ªùi solo</td>
        <td>G·ª≠i l·ªùi m·ªùi solo t·ªõi ng∆∞·ªùi ch∆°i nh·∫•t ƒë·ªãnh khi server ƒë√¥ng ng∆∞·ªùi.</td>
      </tr>
      <tr>
        <td>!gakeo &lt;t√™n ng∆∞·ªùi ch∆°i&gt;</td>
        <td>M·ªùi solo (t∆∞∆°ng t·ª± !solo)</td>
        <td>G·ª≠i l·ªùi m·ªùi solo t·ªõi ng∆∞·ªùi ch∆°i nh·∫•t ƒë·ªãnh khi server ƒë√¥ng ng∆∞·ªùi.</td>
      </tr>
      <tr>
        <td>!ok</td>
        <td>Ch·∫•p nh·∫≠n solo</td>
        <td>ƒê·ªìng √Ω v·ªõi l·ªùi m·ªùi solo t·ª´ ng∆∞·ªùi g·ª≠i.</td>
      </tr>
      <tr>
        <td>!no</td>
        <td>T·ª´ ch·ªëi solo</td>
        <td>T·ª´ ch·ªëi l·ªùi m·ªùi solo solo t·ª´ ng∆∞·ªùi g·ª≠i.</td>
      </tr>
    </table>
  </div>

  <script>
    // ƒê·ªãa ch·ªâ IP Public c·ªë ƒë·ªãnh
    const serverIP = "171.227.65.1:27015";
    // ƒê∆∞·ªùng d·∫´n API (s·ª≠ d·ª•ng IP public backend n·∫øu c·∫ßn)
    const apiUrl = "http://171.227.65.1:5000/api/server_info";

    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        const infoDiv = document.getElementById("info");

        if (data.error) {
          infoDiv.innerHTML = `<p class="error">L·ªói: ${data.error}</p>`;
          return;
        }

        if (!data.map) {
          infoDiv.innerHTML = `<p class="error">L·ªói: Kh√¥ng c√≥ d·ªØ li·ªáu b·∫£n ƒë·ªì (map)</p>`;
          return;
        }

        if (data.players_online == 0) {
          infoDiv.innerHTML = `
            <h2>T√™n Server: ${data.server_name || "Unknown"}</h2>
            <p>Map: ${data.map || "Unknown"}</p>
            <p>S·ªë ng∆∞·ªùi ch∆°i: 0 / ${data.total_players || 0}</p>
            <div class="status-bar">Kh√¥ng c√≥ ng∆∞·ªùi ch∆°i online</div>
          `;
        } else {
          infoDiv.innerHTML = `
            <h2>T√™n Server: ${data.server_name || "Unknown"}</h2>
            <p>Map: ${data.map || "Unknown"}</p>
            <p>S·ªë ng∆∞·ªùi ch∆°i: ${data.players_online || 0} / ${data.total_players || 0}</p>
            <h3>Danh s√°ch ng∆∞·ªùi ch∆°i:</h3>
            <ul>
              ${data.players.map(player => {
                // Lo·∫°i b·ªè IP v√† port n·∫øu c√≥, ch·ªâ l·∫•y t√™n ng∆∞·ªùi ch∆°i
                let cleanPlayer = player.replace(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d+\s*/, "").trim();
                return `<li>${cleanPlayer || "Ng∆∞·ªùi ch∆°i ·∫©n danh"}</li>`;
              }).join('')}
            </ul>
          `;
        }

        // Hi·ªÉn th·ªã n√∫t "K·∫øt n·ªëi t·ªõi Server"
        const connectButton = document.getElementById("connectButton");
        connectButton.style.display = "block";
        connectButton.onclick = () => {
          window.location.href = `steam://connect/${serverIP}`;
        };
      })
      .catch(error => {
        console.error("L·ªói g·ªçi API:", error);
        document.getElementById("info").innerHTML = `<p class="error">Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn API</p>`;
      });

  </script>
</body>
</html>
